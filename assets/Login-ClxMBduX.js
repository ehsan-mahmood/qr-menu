import{_ as R,u as S,r,o as C,a as T,b as I,c as u,d as e,e as b,f as L,T as Q,t as q,w as D,g as v,v as f,h as U,i as d}from"./index-Dpv-nFGf.js";import{u as V,a as B}from"./menuStore-BtuCmthR.js";import"./qrService-TqEF4dyz.js";import"./menuService-DyBKZB5h.js";const P={class:"login-page"},E={class:"login-container"},F={class:"login-card"},N={key:0,class:"test-banner"},A={key:1,class:"error-banner"},O=["disabled"],W=["disabled"],$={class:"form-options"},j={class:"checkbox-group"},z=["disabled"],G={key:0},H={key:1},J={__name:"Login",setup(K){const l=I(),y=T(),h=S(),a=V(),g=B(),c=r(""),p=r(""),m=r(!1),o=r(!1),n=r(""),k=Q;C(async()=>{const t=y.query.qr;if(t&&typeof t=="string")try{if(await a.fetchQRData(t),a.menuId){await g.fetchMenuById(a.menuId),await g.fetchMenuConfig(a.menuId),l.push(`/menu/${a.menuId}`);return}}catch(s){console.error("Failed to load QR code data:",s),n.value="Invalid QR code. Please scan a valid QR code or login to continue."}});const w=async()=>{n.value="",o.value=!0;try{await h.login({email:c.value,password:p.value,rememberMe:m.value}),l.push("/dashboard")}catch(t){n.value=t.message||"Login failed. Please check your credentials."}finally{o.value=!1}},M=()=>{console.log("goToSignUp called"),console.log("Router:",l),l.push("/signup")},_=()=>{l.push("/menu/test-menu-001")},x=()=>{alert("Password reset functionality coming soon!")};return(t,s)=>(d(),u("div",P,[e("div",E,[s[10]||(s[10]=e("div",{class:"login-header"},[e("h1",{class:"login-title"},"QR Menu"),e("p",{class:"login-subtitle"},"Merchant Login")],-1)),e("div",F,[s[7]||(s[7]=e("h2",{class:"card-title"},"Welcome Back",-1)),L(k)?(d(),u("div",N,[...s[3]||(s[3]=[e("p",null," Test Mode: Use any credentials to login ",-1)])])):b("",!0),n.value?(d(),u("div",A,[e("p",null,q(n.value),1)])):b("",!0),e("form",{onSubmit:D(w,["prevent"]),class:"login-form"},[e("div",null,[s[4]||(s[4]=e("label",{for:"email",class:"input-label"}," Email ",-1)),v(e("input",{id:"email","onUpdate:modelValue":s[0]||(s[0]=i=>c.value=i),type:"email",required:"",class:"input-field",placeholder:"your@email.com",disabled:o.value},null,8,O),[[f,c.value]])]),e("div",null,[s[5]||(s[5]=e("label",{for:"password",class:"input-label"}," Password ",-1)),v(e("input",{id:"password","onUpdate:modelValue":s[1]||(s[1]=i=>p.value=i),type:"password",required:"",class:"input-field",placeholder:"••••••••",disabled:o.value},null,8,W),[[f,p.value]])]),e("div",$,[e("label",j,[v(e("input",{"onUpdate:modelValue":s[2]||(s[2]=i=>m.value=i),type:"checkbox",class:"checkbox-input"},null,512),[[U,m.value]]),s[6]||(s[6]=e("span",{class:"checkbox-label"},"Remember me",-1))]),e("button",{type:"button",class:"btn-link",onClick:x}," Forgot password? ")]),e("button",{type:"submit",class:"btn-primary btn-full",disabled:o.value},[o.value?(d(),u("span",G,"Logging in...")):(d(),u("span",H,"Log In"))],8,z)],32),s[8]||(s[8]=e("div",{class:"divider"},[e("div",{class:"divider-line"}),e("div",{class:"divider-text"},[e("span",null,"New to QR Menu?")])],-1)),e("button",{onClick:M,class:"btn-secondary btn-full"}," Create an Account ")]),e("div",{class:"customer-access"},[s[9]||(s[9]=e("p",{class:"customer-text"},"Customer?",-1)),e("button",{onClick:_,class:"btn-link"}," View Demo Menu ")])])]))}},se=R(J,[["__scopeId","data-v-359d10e5"]]);export{se as default};
