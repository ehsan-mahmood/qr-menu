import{_ as Z,u as tt,r as m,j as et,E as st,o as at,B as nt,c as i,d as t,e as r,p as D,g as F,v as z,m as ot,n as it,t as n,h as B,F as v,l as h,b as lt,i as l,w as U}from"./index-Dpv-nFGf.js";import{o as H}from"./orderService-CVSliywn.js";import"./demoStorage-LjyBGDXa.js";const dt={class:"order-management"},rt={class:"header-bar"},ct={class:"header-top"},ut={class:"header-actions"},pt={key:0,class:"controls-bar"},mt={class:"controls-left"},vt={class:"search-input-wrapper"},ht=["disabled"],_t={class:"auto-refresh-toggle"},bt={key:1,class:"kitchen-controls"},gt={class:"search-input-wrapper-kitchen"},yt={class:"kitchen-controls-right"},kt=["title"],ft=["disabled"],xt={class:"auto-refresh-toggle"},wt={key:0,class:"kitchen-banner"},Ct={key:1,class:"toast-notification"},At={class:"toast-content"},$t={class:"toast-text"},It={class:"toast-title"},Tt={class:"toast-message"},Mt={key:0,class:"empty-state"},Nt={key:1,class:"error-card"},St={class:"error-message"},Pt={key:2,class:"empty-state"},Ot={class:"empty-state-text"},Dt={key:3,class:"kanban-board"},Ft={class:"kanban-grid"},Rt={class:"kanban-column"},Lt={class:"kanban-header kanban-header-pending"},qt={class:"kanban-count"},Vt={class:"kanban-content"},Ut={class:"order-card-header"},Et={class:"order-card-time"},Kt={class:"time-label"},zt={class:"time-meta"},Bt={class:"order-id"},Ht={class:"table-number"},Wt={class:"order-items"},jt={class:"item-name"},Gt={class:"item-price"},Jt={class:"order-total"},Qt={class:"total-amount"},Yt=["onClick","disabled"],Xt={key:0,class:"empty-column"},Zt={class:"kanban-column"},te={class:"kanban-header kanban-header-preparing"},ee={class:"kanban-count"},se={class:"kanban-content"},ae={class:"order-card-header"},ne={class:"order-card-time"},oe={class:"time-label"},ie={class:"time-meta"},le={class:"order-card-actions"},de=["onClick"],re={class:"order-id"},ce={class:"table-number"},ue={key:0,class:"order-items"},pe={class:"item-name"},me={class:"item-price"},ve={key:1,class:"order-items-summary"},he={key:0,class:"order-items-more"},_e=["onClick"],be={class:"order-total"},ge={class:"total-amount"},ye={class:"order-actions"},ke=["onClick","disabled"],fe=["onClick","disabled"],xe={key:0,class:"empty-column"},we={class:"kanban-column"},Ce={class:"kanban-header kanban-header-ready"},Ae={class:"kanban-count"},$e={class:"kanban-content"},Ie={class:"order-card-header"},Te={class:"order-card-time"},Me={class:"time-label"},Ne={class:"time-meta"},Se={class:"order-card-actions"},Pe=["onClick"],Oe={class:"order-id"},De={class:"ready-alert"},Fe={class:"ready-alert-text"},Re={class:"table-number"},Le={key:0,class:"order-items"},qe={class:"item-name"},Ve={class:"item-price"},Ue={key:1,class:"order-items-summary"},Ee={key:0,class:"order-items-more"},Ke=["onClick"],ze={class:"order-total"},Be={class:"total-amount"},He=["onClick","disabled"],We={key:0,class:"empty-column"},je={class:"kanban-column"},Ge={class:"kanban-header kanban-header-served"},Je={class:"kanban-count"},Qe={class:"kanban-content"},Ye={class:"order-card-header"},Xe={class:"table-number-small"},Ze=["onClick"],ts={class:"order-id-small"},es={class:"order-summary"},ss={class:"order-summary-text"},as={class:"order-summary-total"},ns={class:"order-time-small"},os={key:0,class:"empty-column"},is={key:4,class:"orders-grid"},ls={class:"order-card-header-regular"},ds={class:"order-time-section"},rs={class:"time-primary"},cs={class:"time-secondary"},us={class:"order-header-right"},ps=["onClick"],ms={class:"order-main-info"},vs={class:"table-number-regular"},hs={class:"order-id-regular"},_s={class:"order-items-section"},bs={class:"item-name-regular"},gs={class:"item-price-regular"},ys={class:"time-metadata-section"},ks={class:"time-metadata-row"},fs={class:"time-metadata-value"},xs={key:0,class:"time-metadata-row"},ws={class:"time-metadata-value"},Cs={class:"time-metadata-row"},As={class:"order-total-section"},$s={class:"total-amount-regular"},Is={class:"order-actions-regular"},Ts=["onClick","disabled"],Ms=["onClick","disabled"],Ns=["onClick","disabled"],Ss=["onClick","disabled"],Ps={__name:"OrderManagement",setup(Os){const W=lt(),R=tt(),b=m([]),y=m(!1),L=m(null),k=m(""),f=m(""),A=m(!0),u=m(!1),$=m(null),_=m(null),I=m(!0),q=m(new Set);let x=null;const S=et(()=>{let o=[...b.value];if(!u.value&&f.value&&(o=o.filter(s=>s.status===f.value)),k.value){const s=k.value.toLowerCase();o=o.filter(e=>e.tableNumber&&e.tableNumber.toLowerCase().includes(s))}return u.value&&(o=o.filter(s=>s.status!=="cancelled")),o.sort((s,e)=>{const a={pending:0,preparing:1,ready:2,served:3,cancelled:4},d=a[s.status]||5,c=a[e.status]||5;return d!==c?d-c:new Date(e.createdAt)-new Date(s.createdAt)})}),p=o=>S.value.filter(s=>s.status===o).sort((s,e)=>new Date(s.createdAt)-new Date(e.createdAt)),T=async()=>{var o,s,e;y.value=!0,L.value=null;try{const d={merchantId:((o=R.merchant)==null?void 0:o.id)||((s=R.user)==null?void 0:s.merchantId)||((e=R.user)==null?void 0:e.userId),...f.value&&{status:f.value}},c=await H.getAllOrders(d),M=b.value.length,P=new Set(b.value.map(O=>O.orderId)),N=c.data||c||[];if(b.value=Array.isArray(N)?N:[],M>0&&b.value.length>M){const O=b.value.filter(X=>!P.has(X.orderId));O.length>0&&(K("New Order",`${O.length} new order${O.length>1?"s":""} received`),Q())}}catch(a){console.error("Failed to load orders:",a),L.value="Failed to load orders. Please try again."}finally{y.value=!1}},g=async(o,s)=>{_.value=o;try{await H.updateOrderStatus(o,s);const e=b.value.find(a=>a.orderId===o);e&&(e.status=s,e.updatedAt=new Date().toISOString(),e.statusHistory||(e.statusHistory=[]),e.statusHistory.push({status:s,timestamp:e.updatedAt})),K("Order Updated",`Order #${o.slice(-6)} marked as ${E(s)}`)}catch(e){console.error("Failed to update order status:",e),alert("Failed to update order status. Please try again.")}finally{_.value=null}},E=o=>({pending:"Pending",preparing:"Preparing",ready:"Ready",served:"Served",cancelled:"Cancelled"})[o]||o,w=o=>{if(!o)return"N/A";const s=new Date(o),a=new Date-s,d=Math.floor(a/6e4);if(d<1)return"Just now";if(d<60)return`${d}m ago`;const c=Math.floor(d/60);return c<24?`${c}h ago`:s.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},C=o=>{if(!o.createdAt)return"N/A";const s=new Date(o.createdAt),a=(o.updatedAt?new Date(o.updatedAt):new Date)-s,d=Math.floor(a/6e4);if(d<1)return"< 1 min";if(d<60)return`${d} min`;const c=Math.floor(d/60),M=d%60;return`${c}h ${M}m`},j=o=>{const s=new Date(o.createdAt),a=(o.updatedAt?new Date(o.updatedAt):new Date)-s;return Math.floor(a/6e4)>30?"time-alert":""},G=o=>({pending:"status-badge-pending",preparing:"status-badge-preparing",ready:"status-badge-ready",served:"status-badge-served",cancelled:"status-badge-cancelled"})[o]||"",J=o=>({pending:"order-card-pending",preparing:"order-card-preparing",ready:"order-card-ready-regular",served:"order-card-served-regular",cancelled:"order-card-cancelled"})[o]||"",K=(o,s)=>{$.value={title:o,message:s},setTimeout(()=>{$.value=null},5e3)},Q=()=>{try{const o=new(window.AudioContext||window.webkitAudioContext),s=o.createOscillator(),e=o.createGain();s.connect(e),e.connect(o.destination),s.frequency.value=800,s.type="sine",e.gain.setValueAtTime(.3,o.currentTime),e.gain.exponentialRampToValueAtTime(.01,o.currentTime+.3),s.start(o.currentTime),s.stop(o.currentTime+.3)}catch{console.log("Could not play notification sound")}},Y=()=>{R.logout(),W.push("/")},V=o=>{const s=document.createElement("iframe");s.style.position="fixed",s.style.right="0",s.style.bottom="0",s.style.width="0",s.style.height="0",s.style.border="0",document.body.appendChild(s);let e=!1;const a=()=>{e||(e=!0,s.contentWindow&&(s.contentWindow.focus(),s.contentWindow.print(),setTimeout(()=>{s.parentNode&&document.body.removeChild(s)},1e3)))},d=new Date,c=new Date(o.createdAt),M=`
    <!DOCTYPE html>
    <html>
    <head>
      <meta charset="UTF-8">
      <style>
        @media print {
          @page {
            size: 80mm auto;
            margin: 5mm;
          }
          body {
            margin: 0;
            padding: 0;
          }
        }
        body {
          font-family: 'Courier New', monospace;
          font-size: 12px;
          line-height: 1.4;
          padding: 10px;
          max-width: 300px;
          margin: 0 auto;
        }
        .header {
          text-align: center;
          border-bottom: 2px dashed #000;
          padding-bottom: 10px;
          margin-bottom: 10px;
        }
        .header h1 {
          margin: 0;
          font-size: 18px;
          font-weight: bold;
        }
        .order-info {
          margin-bottom: 10px;
          padding-bottom: 10px;
          border-bottom: 1px dashed #ccc;
        }
        .order-info div {
          margin: 3px 0;
        }
        .items {
          margin: 10px 0;
        }
        .item {
          margin: 5px 0;
          padding: 3px 0;
        }
        .item-quantity {
          font-weight: bold;
        }
        .total {
          border-top: 2px solid #000;
          padding-top: 10px;
          margin-top: 10px;
          text-align: right;
          font-size: 14px;
          font-weight: bold;
        }
        .footer {
          margin-top: 15px;
          padding-top: 10px;
          border-top: 1px dashed #ccc;
          text-align: center;
          font-size: 10px;
          color: #666;
        }
        .status {
          background: #f0f0f0;
          padding: 5px;
          margin: 10px 0;
          text-align: center;
          font-weight: bold;
        }
      </style>
    </head>
    <body>
      <div class="header">
        <h1>KITCHEN DOCKET</h1>
      </div>
      
      <div class="order-info">
        <div><strong>Table:</strong> ${o.tableNumber||"N/A"}</div>
        <div><strong>Order #:</strong> ${o.orderId.slice(-8)}</div>
        <div><strong>Time:</strong> ${c.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}</div>
        <div><strong>Date:</strong> ${c.toLocaleDateString()}</div>
        <div class="status">Status: ${E(o.status).toUpperCase()}</div>
      </div>
      
      <div class="items">
        <strong>ITEMS:</strong>
        ${o.items.map(N=>`
          <div class="item">
            <span class="item-quantity">${N.quantity}x</span> ${N.name||N.menu_item_id}
          </div>
        `).join("")}
      </div>
      
      <div class="total">
        TOTAL: $${o.totalAmount.toFixed(2)}
      </div>
      
      <div class="footer">
        Printed: ${d.toLocaleString()}<br>
        Processing Time: ${C(o)}
      </div>
    </body>
    </html>
  `,P=s.contentDocument||s.contentWindow.document;P.open(),P.write(M),P.close(),s.onload=()=>{setTimeout(()=>{a()},250)},setTimeout(()=>{e||a()},500)};return st(A,o=>{o?x=setInterval(()=>{T()},1e4):x&&(clearInterval(x),x=null)}),at(()=>{T(),A.value&&(x=setInterval(()=>{T()},1e4))}),nt(()=>{x&&clearInterval(x)}),(o,s)=>(l(),i("div",dt,[t("div",rt,[t("div",{class:D(u.value?"header-content-full":"header-content")},[t("div",ct,[s[9]||(s[9]=t("h1",{class:"page-title"},"Order Management",-1)),t("div",ut,[u.value?(l(),i("button",{key:0,onClick:s[0]||(s[0]=e=>u.value=!1),class:"btn-secondary",title:"Exit kitchen mode and return to regular grid view"}," Exit Kitchen Mode ")):(l(),i("button",{key:1,onClick:s[1]||(s[1]=e=>u.value=!0),class:"btn-primary",title:"Switch to kitchen mode (Kanban board view)"}," Kitchen Mode ")),t("button",{onClick:Y,class:"btn-secondary",title:"Log out of your account"}," Logout ")])]),u.value?r("",!0):(l(),i("div",pt,[t("div",mt,[t("div",vt,[F(t("input",{"onUpdate:modelValue":s[2]||(s[2]=e=>k.value=e),type:"text",placeholder:"Search by table number...",class:"input-field"},null,512),[[z,k.value]])]),F(t("select",{"onUpdate:modelValue":s[3]||(s[3]=e=>f.value=e),class:"select-field"},[...s[10]||(s[10]=[it('<option value="" data-v-1ffa4dcc>All Statuses</option><option value="pending" data-v-1ffa4dcc>Pending</option><option value="preparing" data-v-1ffa4dcc>Preparing</option><option value="ready" data-v-1ffa4dcc>Ready</option><option value="served" data-v-1ffa4dcc>Served</option><option value="cancelled" data-v-1ffa4dcc>Cancelled</option>',6)])],512),[[ot,f.value]]),t("button",{onClick:T,disabled:y.value,class:"btn-primary btn-compact",title:"Refresh orders list"},n(y.value?"Loading...":"Refresh"),9,ht)]),t("div",_t,[F(t("input",{type:"checkbox",id:"autoRefreshRegular","onUpdate:modelValue":s[4]||(s[4]=e=>A.value=e),class:"checkbox-input",title:"Automatically refresh orders every 10 seconds"},null,512),[[B,A.value]]),s[11]||(s[11]=t("label",{for:"autoRefreshRegular",class:"checkbox-label"}," Auto-refresh (10s) ",-1))])])),u.value?(l(),i("div",bt,[t("div",gt,[F(t("input",{"onUpdate:modelValue":s[5]||(s[5]=e=>k.value=e),type:"text",placeholder:"Search table...",class:"input-field"},null,512),[[z,k.value]])]),t("div",yt,[t("button",{onClick:s[6]||(s[6]=e=>I.value=!I.value),class:"btn-secondary btn-compact",title:I.value?"Switch to summary view (shows fewer details)":"Switch to full details view (shows all items)"},n(I.value?"Summary":"Full Details"),9,kt),t("button",{onClick:T,disabled:y.value,class:"btn-primary btn-compact",title:"Refresh orders list"},n(y.value?"Loading...":"Refresh"),9,ft),t("div",xt,[F(t("input",{type:"checkbox",id:"autoRefreshKitchen","onUpdate:modelValue":s[7]||(s[7]=e=>A.value=e),class:"checkbox-input",title:"Automatically refresh orders every 10 seconds"},null,512),[[B,A.value]]),s[12]||(s[12]=t("label",{for:"autoRefreshKitchen",class:"checkbox-label"}," Auto (10s) ",-1))])])])):r("",!0)],2)]),u.value?(l(),i("div",wt,[...s[13]||(s[13]=[t("p",{class:"kitchen-banner-text"},"Kitchen Mode",-1)])])):r("",!0),$.value?(l(),i("div",Ct,[t("div",At,[t("div",$t,[t("p",It,n($.value.title),1),t("p",Tt,n($.value.message),1)]),t("button",{onClick:s[8]||(s[8]=e=>$.value=null),class:"toast-close",title:"Close notification","aria-label":"Close notification"}," Close ")])])):r("",!0),t("div",{class:D(u.value?"content-full":"content")},[y.value&&b.value.length===0?(l(),i("div",Mt,[...s[14]||(s[14]=[t("p",{class:"empty-state-text"},"Loading orders...",-1)])])):L.value?(l(),i("div",Nt,[s[15]||(s[15]=t("h3",{class:"error-title"},"Failed to Load Orders",-1)),t("p",St,n(L.value),1),t("button",{onClick:T,class:"btn-primary"},"Try Again")])):S.value.length===0?(l(),i("div",Pt,[s[16]||(s[16]=t("h3",{class:"empty-state-title"},"No Orders Found",-1)),t("p",Ot,n(f.value||k.value?"Try adjusting your filters.":"No orders yet."),1)])):r("",!0),u.value&&S.value.length>0?(l(),i("div",Dt,[t("div",Ft,[t("div",Rt,[t("div",Lt,[s[17]||(s[17]=t("div",{class:"kanban-header-content"},[t("h3",{class:"kanban-title"},"Pending"),t("p",{class:"kanban-subtitle"},"New orders")],-1)),t("span",qt,n(p("pending").length),1)]),t("div",Vt,[(l(!0),i(v,null,h(p("pending"),e=>(l(),i("div",{key:e.orderId,class:"kanban-card kanban-card-pending"},[t("div",Ut,[t("div",Et,[t("span",Kt,n(w(e.createdAt)),1),t("span",zt,n(C(e)),1)]),t("span",Bt,"#"+n(e.orderId.slice(-6)),1)]),t("h3",Ht,"Table "+n(e.tableNumber||"N/A"),1),t("div",Wt,[(l(!0),i(v,null,h(e.items,(a,d)=>(l(),i("div",{key:d,class:"order-item"},[t("span",jt,n(a.quantity)+"x "+n(a.name||a.menu_item_id),1),t("span",Gt,"$"+n(((a.price||a.price_cents/100)*(a.quantity||1)).toFixed(2)),1)]))),128))]),t("div",Jt,[s[18]||(s[18]=t("span",{class:"total-label"},"Total:",-1)),t("span",Qt,"$"+n(e.totalAmount.toFixed(2)),1)]),t("button",{onClick:a=>g(e.orderId,"preparing"),disabled:_.value===e.orderId,class:"btn-primary btn-full",title:"Move order to Preparing status"}," Move to Preparing ",8,Yt)]))),128)),p("pending").length===0?(l(),i("div",Xt,[...s[19]||(s[19]=[t("p",{class:"empty-column-text"},"No pending orders",-1)])])):r("",!0)])]),t("div",Zt,[t("div",te,[s[20]||(s[20]=t("div",{class:"kanban-header-content"},[t("h3",{class:"kanban-title"},"Preparing"),t("p",{class:"kanban-subtitle"},"In kitchen")],-1)),t("span",ee,n(p("preparing").length),1)]),t("div",se,[(l(!0),i(v,null,h(p("preparing"),e=>(l(),i("div",{key:e.orderId,class:"kanban-card kanban-card-preparing"},[t("div",ae,[t("div",ne,[t("span",oe,n(w(e.createdAt)),1),t("span",ie,n(C(e)),1)]),t("div",le,[t("button",{onClick:U(a=>V(e),["stop"]),class:"btn-icon",title:"Print kitchen docket"}," Print ",8,de),t("span",re,"#"+n(e.orderId.slice(-6)),1)])]),t("h3",ce,"Table "+n(e.tableNumber||"N/A"),1),I.value||q.value.has(e.orderId)?(l(),i("div",ue,[(l(!0),i(v,null,h(e.items,(a,d)=>(l(),i("div",{key:d,class:"order-item"},[t("span",pe,n(a.quantity)+"x "+n(a.name||a.menu_item_id),1),t("span",me,"$"+n(((a.price||a.price_cents/100)*(a.quantity||1)).toFixed(2)),1)]))),128))])):(l(),i("div",ve,[(l(!0),i(v,null,h(e.items.slice(0,2),(a,d)=>(l(),i("div",{key:d,class:"order-item-summary"},n(a.quantity)+"x "+n(a.name||a.menu_item_id),1))),128)),e.items.length>2?(l(),i("p",he," +"+n(e.items.length-2)+" more items ",1)):r("",!0),t("button",{onClick:a=>q.value.add(e.orderId),class:"btn-link"}," View all "+n(e.items.length)+" items ",9,_e)])),t("div",be,[s[21]||(s[21]=t("span",{class:"total-label"},"Total:",-1)),t("span",ge,"$"+n(e.totalAmount.toFixed(2)),1)]),t("div",ye,[t("button",{onClick:a=>g(e.orderId,"ready"),disabled:_.value===e.orderId,class:"btn-success btn-full",title:"Mark order as ready for pickup"}," Mark Ready for Pickup ",8,ke),t("button",{onClick:a=>g(e.orderId,"cancelled"),disabled:_.value===e.orderId,class:"btn-destructive",title:"Cancel this order"}," Cancel Order ",8,fe)])]))),128)),p("preparing").length===0?(l(),i("div",xe,[...s[22]||(s[22]=[t("p",{class:"empty-column-text"},"No orders preparing",-1)])])):r("",!0)])]),t("div",we,[t("div",Ce,[s[23]||(s[23]=t("div",{class:"kanban-header-content"},[t("h3",{class:"kanban-title"},"Ready"),t("p",{class:"kanban-subtitle"},"Ready for pickup")],-1)),t("span",Ae,n(p("ready").length),1)]),t("div",$e,[(l(!0),i(v,null,h(p("ready"),e=>(l(),i("div",{key:e.orderId,class:"kanban-card kanban-card-ready"},[t("div",Ie,[t("div",Te,[t("span",Me,n(w(e.createdAt)),1),t("span",Ne,n(C(e)),1)]),t("div",Se,[t("button",{onClick:U(a=>V(e),["stop"]),class:"btn-icon",title:"Print kitchen docket"}," Print ",8,Pe),t("span",Oe,"#"+n(e.orderId.slice(-6)),1)])]),t("div",De,[t("span",Fe,"Ready for pickup Â· "+n(C(e)),1)]),t("h3",Re,"Table "+n(e.tableNumber||"N/A"),1),I.value||q.value.has(e.orderId)?(l(),i("div",Le,[(l(!0),i(v,null,h(e.items,(a,d)=>(l(),i("div",{key:d,class:"order-item"},[t("span",qe,n(a.quantity)+"x "+n(a.name||a.menu_item_id),1),t("span",Ve,"$"+n(((a.price||a.price_cents/100)*(a.quantity||1)).toFixed(2)),1)]))),128))])):(l(),i("div",Ue,[(l(!0),i(v,null,h(e.items.slice(0,2),(a,d)=>(l(),i("div",{key:d,class:"order-item-summary"},n(a.quantity)+"x "+n(a.name||a.menu_item_id),1))),128)),e.items.length>2?(l(),i("p",Ee," +"+n(e.items.length-2)+" more items ",1)):r("",!0),t("button",{onClick:a=>q.value.add(e.orderId),class:"btn-link"}," View all "+n(e.items.length)+" items ",9,Ke)])),t("div",ze,[s[24]||(s[24]=t("span",{class:"total-label"},"Total:",-1)),t("span",Be,"$"+n(e.totalAmount.toFixed(2)),1)]),t("button",{onClick:a=>g(e.orderId,"served"),disabled:_.value===e.orderId,class:"btn-primary btn-full",title:"Mark order as served to customer"}," Mark as Served ",8,He)]))),128)),p("ready").length===0?(l(),i("div",We,[...s[25]||(s[25]=[t("p",{class:"empty-column-text"},"No orders ready",-1)])])):r("",!0)])]),t("div",je,[t("div",Ge,[s[26]||(s[26]=t("div",{class:"kanban-header-content"},[t("h3",{class:"kanban-title"},"Served"),t("p",{class:"kanban-subtitle"},"Completed")],-1)),t("span",Je,n(p("served").length),1)]),t("div",Qe,[(l(!0),i(v,null,h(p("served"),e=>{var a;return l(),i("div",{key:e.orderId,class:"kanban-card kanban-card-served"},[t("div",Ye,[t("h3",Xe,"Table "+n(e.tableNumber||"N/A"),1),t("button",{onClick:U(d=>V(e),["stop"]),class:"btn-icon",title:"Print kitchen docket"}," Print ",8,Ze)]),t("p",ts,"#"+n(e.orderId.slice(-6)),1),t("div",es,[t("p",ss,n((a=e.items)==null?void 0:a.length)+" items",1),t("p",as,"$"+n(e.totalAmount.toFixed(2)),1)]),t("p",ns,n(w(e.createdAt)),1)])}),128)),p("served").length===0?(l(),i("div",os,[...s[27]||(s[27]=[t("p",{class:"empty-column-text"},"No served orders",-1)])])):r("",!0)])])])])):!u.value&&S.value.length>0?(l(),i("div",is,[(l(!0),i(v,null,h(S.value,e=>(l(),i("div",{key:e.orderId,class:D(["order-card",J(e.status)])},[t("div",ls,[t("div",ds,[t("div",rs,n(w(e.createdAt)),1),t("div",cs,n(C(e)),1)]),t("div",us,[t("button",{onClick:U(a=>V(e),["stop"]),class:"btn-icon",title:"Print kitchen docket"}," Print ",8,ps),t("span",{class:D(["status-badge",G(e.status)])},n(E(e.status)),3)])]),t("div",ms,[t("h3",vs," Table "+n(e.tableNumber||"N/A"),1),t("p",hs,"Order #"+n(e.orderId.slice(-6)),1)]),t("div",_s,[(l(!0),i(v,null,h(e.items,(a,d)=>(l(),i("div",{key:d,class:"order-item-regular"},[t("span",bs,n(a.quantity)+"x "+n(a.name||a.menu_item_id),1),t("span",gs," $"+n(((a.price||a.price_cents/100)*(a.quantity||1)).toFixed(2)),1)]))),128))]),t("div",ys,[t("div",ks,[s[28]||(s[28]=t("span",{class:"time-metadata-label"},"Received:",-1)),t("span",fs,n(w(e.createdAt)),1)]),e.updatedAt!==e.createdAt?(l(),i("div",xs,[s[29]||(s[29]=t("span",{class:"time-metadata-label"},"Last Updated:",-1)),t("span",ws,n(w(e.updatedAt)),1)])):r("",!0),t("div",Cs,[s[30]||(s[30]=t("span",{class:"time-metadata-label"},"Processing Time:",-1)),t("span",{class:D(["time-metadata-value",j(e)])},n(C(e)),3)])]),t("div",As,[s[31]||(s[31]=t("span",{class:"total-label-regular"},"Total:",-1)),t("span",$s," $"+n(e.totalAmount.toFixed(2)),1)]),t("div",Is,[e.status==="pending"?(l(),i("button",{key:0,onClick:a=>g(e.orderId,"preparing"),disabled:_.value===e.orderId,class:"btn-primary btn-action",title:"Move order to Preparing status"}," Move to Preparing ",8,Ts)):r("",!0),e.status==="preparing"?(l(),i("button",{key:1,onClick:a=>g(e.orderId,"ready"),disabled:_.value===e.orderId,class:"btn-success btn-action",title:"Mark order as ready for pickup"}," Mark Ready ",8,Ms)):r("",!0),e.status==="ready"?(l(),i("button",{key:2,onClick:a=>g(e.orderId,"served"),disabled:_.value===e.orderId,class:"btn-served btn-action",title:"Mark order as served to customer"}," Mark Served ",8,Ns)):r("",!0),["pending","preparing"].includes(e.status)?(l(),i("button",{key:3,onClick:a=>g(e.orderId,"cancelled"),disabled:_.value===e.orderId,class:"btn-destructive btn-action",title:"Cancel this order"}," Cancel ",8,Ss)):r("",!0)])],2))),128))])):r("",!0)],2)]))}},Ls=Z(Ps,[["__scopeId","data-v-1ffa4dcc"]]);export{Ls as default};
