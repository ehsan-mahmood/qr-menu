import{_ as S,u as R,r as i,o as C,a as T,b as I,c as d,d as e,e as f,f as L,g as Q,T as V,t as q,w as D,h as v,v as g,i as U,j as u}from"./index-WVObp_XA.js";import{u as B,a as P}from"./menuStore-DKiuWE7i.js";import"./qrService-BIMazV24.js";import"./menuService-9_-7xI5Y.js";const j={class:"min-h-screen bg-cream flex items-center justify-center px-4"},E={class:"max-w-md w-full"},N={class:"card"},F={key:0,class:"mb-4 bg-yellow-50 border border-yellow-200 rounded-lg p-3"},A={key:1,class:"mb-4 bg-red-50 border border-red-200 rounded-lg p-3"},O={class:"text-red-700 text-sm"},W=["disabled"],$=["disabled"],z={class:"flex items-center justify-between text-sm"},G={class:"flex items-center"},H=["disabled"],J={key:0},K={key:1},X={__name:"Login",setup(Y){const a=I(),x=T(),y=R(),l=B(),b=P(),c=i(""),m=i(""),p=i(!1),s=i(!1),r=i(""),w=V;C(async()=>{const o=x.query.qr;if(o&&typeof o=="string")try{if(await l.fetchQRData(o),l.menuId){await b.fetchMenuById(l.menuId),await b.fetchMenuConfig(l.menuId),a.push(`/menu/${l.menuId}`);return}}catch(t){console.error("Failed to load QR code data:",t),r.value="Invalid QR code. Please scan a valid QR code or login to continue."}});const h=async()=>{r.value="",s.value=!0;try{await y.login({email:c.value,password:m.value,rememberMe:p.value}),a.push("/dashboard")}catch(o){r.value=o.message||"Login failed. Please check your credentials."}finally{s.value=!1}},_=()=>{console.log("goToSignUp called"),console.log("Router:",a),a.push("/signup")},M=()=>{a.push("/menu/test-menu-001")},k=()=>{alert("Password reset functionality coming soon!")};return(o,t)=>(u(),d("div",j,[e("div",E,[t[10]||(t[10]=e("div",{class:"text-center mb-8"},[e("h1",{class:"text-4xl font-bold text-charcoal mb-2"},"QR Menu"),e("p",{class:"text-gray"},"Merchant Login")],-1)),e("div",N,[t[7]||(t[7]=e("h2",{class:"text-2xl font-bold text-charcoal mb-6"},"Welcome Back",-1)),Q(w)?(u(),d("div",F,[...t[3]||(t[3]=[e("p",{class:"text-yellow-800 text-sm text-center"}," ðŸ§ª Test Mode: Use any credentials to login ",-1)])])):f("",!0),r.value?(u(),d("div",A,[e("p",O,q(r.value),1)])):f("",!0),e("form",{onSubmit:D(h,["prevent"]),class:"space-y-4"},[e("div",null,[t[4]||(t[4]=e("label",{for:"email",class:"block text-sm font-medium text-charcoal mb-1"}," Email ",-1)),v(e("input",{id:"email","onUpdate:modelValue":t[0]||(t[0]=n=>c.value=n),type:"email",required:"",class:"input",placeholder:"your@email.com",disabled:s.value},null,8,W),[[g,c.value]])]),e("div",null,[t[5]||(t[5]=e("label",{for:"password",class:"block text-sm font-medium text-charcoal mb-1"}," Password ",-1)),v(e("input",{id:"password","onUpdate:modelValue":t[1]||(t[1]=n=>m.value=n),type:"password",required:"",class:"input",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",disabled:s.value},null,8,$),[[g,m.value]])]),e("div",z,[e("label",G,[v(e("input",{"onUpdate:modelValue":t[2]||(t[2]=n=>p.value=n),type:"checkbox",class:"rounded border-warm-gray text-primary focus:ring-primary"},null,512),[[U,p.value]]),t[6]||(t[6]=e("span",{class:"ml-2 text-gray"},"Remember me",-1))]),e("button",{type:"button",class:"text-primary hover:underline",onClick:k}," Forgot password? ")]),e("button",{type:"submit",class:"w-full btn btn-primary",disabled:s.value},[s.value?(u(),d("span",J,"Logging in...")):(u(),d("span",K,"Log In"))],8,H)],32),t[8]||(t[8]=L('<div class="relative my-6" data-v-9c88a291><div class="absolute inset-0 flex items-center" data-v-9c88a291><div class="w-full border-t border-warm-gray" data-v-9c88a291></div></div><div class="relative flex justify-center text-sm" data-v-9c88a291><span class="px-2 bg-white text-gray" data-v-9c88a291>New to QR Menu?</span></div></div>',1)),e("button",{onClick:_,class:"w-full btn btn-secondary"}," Create an Account ")]),e("div",{class:"mt-6 text-center"},[t[9]||(t[9]=e("p",{class:"text-sm text-gray mb-2"},"Customer?",-1)),e("button",{onClick:M,class:"text-primary hover:underline text-sm font-medium"}," View Demo Menu ")])])]))}},oe=S(X,[["__scopeId","data-v-9c88a291"]]);export{oe as default};
