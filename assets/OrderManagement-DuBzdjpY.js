import{_ as X,u as Z,r as g,k as tt,C as et,o as st,E as nt,c as l,d as t,e as d,n as q,h as j,v as z,p as ot,f as at,t as o,i as K,F as x,m as b,b as lt,j as i,w as V}from"./index-BeKgYjxu.js";import{o as H}from"./orderService-CsL7C4bT.js";import"./demoStorage-oaQH5tHS.js";const it={class:"min-h-screen bg-gray-50"},rt={class:"bg-white shadow-sm sticky top-0 z-10"},dt={class:"flex items-center justify-between mb-4"},ct={class:"flex items-center gap-3"},ut={key:0,class:"flex flex-wrap gap-3 mb-4"},pt={class:"flex-1 min-w-[200px]"},gt=["disabled"],xt={key:1,class:"flex items-center justify-between mb-4"},bt={class:"flex-1 max-w-xs"},mt={class:"flex items-center gap-4"},vt=["title"],yt=["disabled"],ft={class:"flex items-center gap-2 text-sm bg-white bg-opacity-10 px-3 py-2 rounded-lg"},ht={key:2,class:"flex items-center gap-2 text-sm bg-gray-50 px-3 py-2 rounded-lg border border-gray-200"},_t={key:0,class:"bg-orange-500 text-white text-center py-2 shadow-md"},wt={key:1,class:"fixed top-4 right-4 z-50 bg-green-500 text-white px-6 py-4 rounded-lg shadow-lg animate-slide-in"},kt={class:"flex items-center gap-3"},Ct={class:"font-bold"},At={class:"text-sm"},$t={key:0,class:"text-center py-12"},It={key:1,class:"card bg-red-50 border border-red-200 text-center"},Tt={class:"text-red-700 mb-4"},Mt={key:2,class:"text-center py-12"},Nt={class:"text-gray-600"},St={key:3,class:"kanban-board w-full"},Ot={class:"grid grid-cols-4 gap-3 h-full",style:{"min-height":"calc(100vh - 180px)"}},Pt={class:"kanban-column"},jt={class:"kanban-header bg-yellow-500"},Dt={class:"badge-count"},Ft={class:"kanban-column-content"},Rt={class:"mb-4"},Lt={class:"flex items-center justify-between mb-2"},qt={class:"text-2xl font-bold text-gray-900"},Vt={class:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded"},Et={class:"flex items-center gap-3 text-sm text-gray-600"},Ut={class:"mb-4 space-y-2"},zt={class:"text-gray-800 font-medium"},Kt={class:"text-gray-600 text-sm"},Ht={class:"mb-4 pt-3 border-t-2 border-gray-200"},Bt={class:"flex items-center justify-between"},Wt={class:"text-2xl font-bold text-orange-600"},Gt=["onClick","disabled"],Jt={key:0,class:"empty-column"},Qt={class:"kanban-column"},Yt={class:"kanban-header bg-blue-500"},Xt={class:"badge-count"},Zt={class:"kanban-column-content"},te={class:"mb-3"},ee={class:"flex items-center justify-between mb-1"},se={class:"text-xl font-bold text-gray-900"},ne={class:"flex items-center gap-2"},oe=["onClick"],ae={class:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded"},le={class:"flex items-center gap-2 text-xs text-gray-600"},ie={key:0,class:"mb-3 space-y-1.5"},re={class:"text-gray-800 font-medium"},de={class:"text-gray-600 text-xs"},ce={key:1,class:"mb-3"},ue={class:"text-sm text-gray-700"},pe={key:0,class:"text-xs text-gray-500 mt-1"},ge=["onClick"],xe={class:"mb-3 pt-2 border-t border-gray-200"},be={class:"flex items-center justify-between"},me={class:"text-xl font-bold text-orange-600"},ve={class:"space-y-2"},ye=["onClick","disabled"],fe=["onClick","disabled"],he={key:0,class:"empty-column"},_e={class:"kanban-column"},we={class:"kanban-header bg-green-500"},ke={class:"badge-count"},Ce={class:"kanban-column-content"},Ae={class:"mb-3"},$e={class:"flex items-center justify-between mb-1"},Ie={class:"text-xl font-bold text-gray-900"},Te={class:"flex items-center gap-2"},Me=["onClick"],Ne={class:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded"},Se={class:"bg-orange-50 border border-orange-200 rounded-lg p-1.5 mb-1.5"},Oe={class:"text-xs text-orange-700 font-semibold flex items-center gap-1.5"},Pe={class:"flex items-center gap-2 text-xs text-gray-600"},je={key:0,class:"mb-3 space-y-1.5"},De={class:"text-gray-800 font-semibold"},Fe={class:"text-gray-600 text-xs"},Re={key:1,class:"mb-3"},Le={class:"text-sm text-gray-700"},qe={key:0,class:"text-xs text-gray-500 mt-1"},Ve=["onClick"],Ee={class:"mb-3 pt-2 border-t border-gray-200"},Ue={class:"flex items-center justify-between"},ze={class:"text-xl font-bold text-orange-600"},Ke=["onClick","disabled"],He={key:0,class:"empty-column"},Be={class:"kanban-column"},We={class:"kanban-header bg-purple-500"},Ge={class:"badge-count"},Je={class:"kanban-column-content"},Qe={class:"mb-3"},Ye={class:"flex items-center justify-between mb-1"},Xe={class:"text-xl font-bold text-gray-700"},Ze=["onClick"],ts={class:"text-xs text-gray-400"},es={class:"mb-2"},ss={class:"text-sm text-gray-600"},ns={class:"text-base font-semibold text-gray-700"},os={class:"text-xs text-gray-500"},as={key:0,class:"empty-column"},ls={key:4,class:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4"},is={class:"flex items-start justify-between mb-4"},rs={class:"text-lg font-bold text-gray-900"},ds={class:"text-sm text-gray-500"},cs={class:"flex items-center gap-2"},us=["onClick"],ps={class:"mb-4 space-y-2"},gs={class:"text-gray-700"},xs={class:"text-gray-600 font-medium"},bs={class:"mb-4 p-3 bg-gray-50 rounded-lg space-y-1 text-xs"},ms={class:"flex justify-between"},vs={class:"font-medium"},ys={key:0,class:"flex justify-between"},fs={class:"font-medium"},hs={class:"flex justify-between"},_s={class:"font-medium text-orange-600"},ws={class:"mb-4 flex items-center justify-between border-t pt-3"},ks={class:"text-xl font-bold text-orange-600"},Cs={class:"flex flex-wrap gap-2"},As=["onClick","disabled"],$s=["onClick","disabled"],Is=["onClick","disabled"],Ts=["onClick","disabled"],Ms={__name:"OrderManagement",setup(Ns){const B=lt(),D=Z(),v=g([]),f=g(!1),F=g(null),h=g(""),_=g(""),C=g(!0),c=g(!1),A=g(null),m=g(null),w=g(!0),R=g(new Set);let k=null;const N=tt(()=>{let a=[...v.value];if(!c.value&&_.value&&(a=a.filter(e=>e.status===_.value)),h.value){const e=h.value.toLowerCase();a=a.filter(s=>s.tableNumber&&s.tableNumber.toLowerCase().includes(e))}return c.value&&(a=a.filter(e=>e.status!=="cancelled")),a.sort((e,s)=>{const n={pending:0,preparing:1,ready:2,served:3,cancelled:4},r=n[e.status]||5,u=n[s.status]||5;return r!==u?r-u:new Date(s.createdAt)-new Date(e.createdAt)})}),p=a=>N.value.filter(e=>e.status===a).sort((e,s)=>new Date(e.createdAt)-new Date(s.createdAt)),$=async()=>{var a,e,s;f.value=!0,F.value=null;try{const r={merchantId:((a=D.merchant)==null?void 0:a.id)||((e=D.user)==null?void 0:e.merchantId)||((s=D.user)==null?void 0:s.userId),..._.value&&{status:_.value}},u=await H.getAllOrders(r),T=v.value.length,O=new Set(v.value.map(P=>P.orderId)),M=u.data||u||[];if(v.value=Array.isArray(M)?M:[],T>0&&v.value.length>T){const P=v.value.filter(Y=>!O.has(Y.orderId));P.length>0&&(U("New Order!",`${P.length} new order${P.length>1?"s":""} received`),J())}}catch(n){console.error("Failed to load orders:",n),F.value="Failed to load orders. Please try again."}finally{f.value=!1}},y=async(a,e)=>{m.value=a;try{await H.updateOrderStatus(a,e);const s=v.value.find(n=>n.orderId===a);s&&(s.status=e,s.updatedAt=new Date().toISOString(),s.statusHistory||(s.statusHistory=[]),s.statusHistory.push({status:e,timestamp:s.updatedAt})),U("Order Updated",`Order #${a.slice(-6)} marked as ${E(e)}`)}catch(s){console.error("Failed to update order status:",s),alert("Failed to update order status. Please try again.")}finally{m.value=null}},E=a=>({pending:"Pending",preparing:"Preparing",ready:"Ready",served:"Served",cancelled:"Cancelled"})[a]||a,I=a=>{if(!a)return"N/A";const e=new Date(a),n=new Date-e,r=Math.floor(n/6e4);if(r<1)return"Just now";if(r<60)return`${r}m ago`;const u=Math.floor(r/60);return u<24?`${u}h ago`:e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},S=a=>{if(!a.createdAt)return"N/A";const e=new Date(a.createdAt),n=(a.updatedAt?new Date(a.updatedAt):new Date)-e,r=Math.floor(n/6e4);if(r<1)return"< 1 min";if(r<60)return`${r} min`;const u=Math.floor(r/60),T=r%60;return`${u}h ${T}m`},W=a=>({pending:"bg-yellow-100 text-yellow-800",preparing:"bg-blue-100 text-blue-800",ready:"bg-green-100 text-green-800",served:"bg-purple-100 text-purple-800",cancelled:"bg-red-100 text-red-800"})[a]||"bg-gray-100 text-gray-800",G=a=>({pending:"border-l-4 border-yellow-500",preparing:"border-l-4 border-blue-500",ready:"border-l-4 border-green-500",served:"border-l-4 border-purple-500",cancelled:"border-l-4 border-red-500"})[a]||"",U=(a,e)=>{A.value={title:a,message:e},setTimeout(()=>{A.value=null},5e3)},J=()=>{try{const a=new(window.AudioContext||window.webkitAudioContext),e=a.createOscillator(),s=a.createGain();e.connect(s),s.connect(a.destination),e.frequency.value=800,e.type="sine",s.gain.setValueAtTime(.3,a.currentTime),s.gain.exponentialRampToValueAtTime(.01,a.currentTime+.3),e.start(a.currentTime),e.stop(a.currentTime+.3)}catch{console.log("Could not play notification sound")}},Q=()=>{D.logout(),B.push("/")},L=a=>{const e=document.createElement("iframe");e.style.position="fixed",e.style.right="0",e.style.bottom="0",e.style.width="0",e.style.height="0",e.style.border="0",document.body.appendChild(e);let s=!1;const n=()=>{s||(s=!0,e.contentWindow&&(e.contentWindow.focus(),e.contentWindow.print(),setTimeout(()=>{e.parentNode&&document.body.removeChild(e)},1e3)))},r=new Date,u=new Date(a.createdAt),T=`
    <!DOCTYPE html>
    <html>
    <head>
      <meta charset="UTF-8">
      <style>
        @media print {
          @page {
            size: 80mm auto;
            margin: 5mm;
          }
          body {
            margin: 0;
            padding: 0;
          }
        }
        body {
          font-family: 'Courier New', monospace;
          font-size: 12px;
          line-height: 1.4;
          padding: 10px;
          max-width: 300px;
          margin: 0 auto;
        }
        .header {
          text-align: center;
          border-bottom: 2px dashed #000;
          padding-bottom: 10px;
          margin-bottom: 10px;
        }
        .header h1 {
          margin: 0;
          font-size: 18px;
          font-weight: bold;
        }
        .order-info {
          margin-bottom: 10px;
          padding-bottom: 10px;
          border-bottom: 1px dashed #ccc;
        }
        .order-info div {
          margin: 3px 0;
        }
        .items {
          margin: 10px 0;
        }
        .item {
          margin: 5px 0;
          padding: 3px 0;
        }
        .item-quantity {
          font-weight: bold;
        }
        .total {
          border-top: 2px solid #000;
          padding-top: 10px;
          margin-top: 10px;
          text-align: right;
          font-size: 14px;
          font-weight: bold;
        }
        .footer {
          margin-top: 15px;
          padding-top: 10px;
          border-top: 1px dashed #ccc;
          text-align: center;
          font-size: 10px;
          color: #666;
        }
        .status {
          background: #f0f0f0;
          padding: 5px;
          margin: 10px 0;
          text-align: center;
          font-weight: bold;
        }
      </style>
    </head>
    <body>
      <div class="header">
        <h1>KITCHEN DOCKET</h1>
      </div>
      
      <div class="order-info">
        <div><strong>Table:</strong> ${a.tableNumber||"N/A"}</div>
        <div><strong>Order #:</strong> ${a.orderId.slice(-8)}</div>
        <div><strong>Time:</strong> ${u.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}</div>
        <div><strong>Date:</strong> ${u.toLocaleDateString()}</div>
        <div class="status">Status: ${E(a.status).toUpperCase()}</div>
      </div>
      
      <div class="items">
        <strong>ITEMS:</strong>
        ${a.items.map(M=>`
          <div class="item">
            <span class="item-quantity">${M.quantity}x</span> ${M.name||M.menu_item_id}
          </div>
        `).join("")}
      </div>
      
      <div class="total">
        TOTAL: $${a.totalAmount.toFixed(2)}
      </div>
      
      <div class="footer">
        Printed: ${r.toLocaleString()}<br>
        Processing Time: ${S(a)}
      </div>
    </body>
    </html>
  `,O=e.contentDocument||e.contentWindow.document;O.open(),O.write(T),O.close(),e.onload=()=>{setTimeout(()=>{n()},250)},setTimeout(()=>{s||n()},500)};return et(C,a=>{a?k=setInterval(()=>{$()},1e4):k&&(clearInterval(k),k=null)}),st(()=>{$(),C.value&&(k=setInterval(()=>{$()},1e4))}),nt(()=>{k&&clearInterval(k)}),(a,e)=>(i(),l("div",it,[t("div",rt,[t("div",{class:q(c.value?"w-full px-4 py-3":"container mx-auto px-4 py-4")},[t("div",dt,[e[9]||(e[9]=t("h1",{class:"text-xl font-bold text-gray-900"},"Order Management",-1)),t("div",ct,[c.value?(i(),l("button",{key:0,onClick:e[0]||(e[0]=s=>c.value=!1),class:"text-sm px-3 py-1.5 text-gray-700 hover:text-gray-900 hover:bg-gray-100 rounded transition-colors",title:"Exit kitchen mode and return to regular grid view"}," Exit Kitchen Mode ")):(i(),l("button",{key:1,onClick:e[1]||(e[1]=s=>c.value=!0),class:"text-sm px-3 py-1.5 bg-orange-500 text-white rounded hover:bg-orange-600 transition-colors font-medium",title:"Switch to kitchen mode (Kanban board view)"}," ðŸ‘¨â€ðŸ³ Kitchen Mode ")),t("button",{onClick:Q,class:"text-sm px-3 py-1.5 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded transition-colors",title:"Log out of your account"}," Logout ")])]),c.value?d("",!0):(i(),l("div",ut,[t("div",pt,[j(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>h.value=s),type:"text",placeholder:"Search by table number...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"},null,512),[[z,h.value]])]),j(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>_.value=s),class:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"},[...e[10]||(e[10]=[at('<option value="" data-v-fd283fea>All Statuses</option><option value="pending" data-v-fd283fea>Pending</option><option value="preparing" data-v-fd283fea>Preparing</option><option value="ready" data-v-fd283fea>Ready</option><option value="served" data-v-fd283fea>Served</option><option value="cancelled" data-v-fd283fea>Cancelled</option>',6)])],512),[[ot,_.value]]),t("button",{onClick:$,disabled:f.value,class:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",title:"Refresh orders list"},[e[11]||(e[11]=t("span",null,"ðŸ”„",-1)),t("span",null,o(f.value?"Loading...":"Refresh Orders"),1)],8,gt)])),c.value?(i(),l("div",xt,[t("div",bt,[j(t("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>h.value=s),type:"text",placeholder:"Search table...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"},null,512),[[z,h.value]])]),t("div",mt,[t("button",{onClick:e[5]||(e[5]=s=>w.value=!w.value),class:"px-4 py-2 bg-white bg-opacity-20 text-charcoal rounded-lg hover:bg-opacity-30 text-sm font-medium flex items-center gap-2",title:w.value?"Switch to summary view (shows fewer details)":"Switch to full details view (shows all items)"},[t("span",null,o(w.value?"ðŸ“‹":"ðŸ“„"),1),t("span",null,o(w.value?"Summary View":"Full Details View"),1)],8,vt),t("button",{onClick:$,disabled:f.value,class:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",title:"Refresh orders list"},[e[12]||(e[12]=t("span",null,"ðŸ”„",-1)),t("span",null,o(f.value?"Loading...":"Refresh Orders"),1)],8,yt),t("div",ft,[j(t("input",{type:"checkbox",id:"autoRefreshKitchen","onUpdate:modelValue":e[6]||(e[6]=s=>C.value=s),class:"rounded cursor-pointer",title:"Automatically refresh orders every 10 seconds"},null,512),[[K,C.value]]),e[13]||(e[13]=t("label",{for:"autoRefreshKitchen",class:"text-charcoal cursor-pointer font-medium"}," Auto-refresh (10s) ",-1))])])])):d("",!0),c.value?d("",!0):(i(),l("div",ht,[j(t("input",{type:"checkbox",id:"autoRefreshRegular","onUpdate:modelValue":e[7]||(e[7]=s=>C.value=s),class:"rounded cursor-pointer",title:"Automatically refresh orders every 10 seconds"},null,512),[[K,C.value]]),e[14]||(e[14]=t("label",{for:"autoRefreshRegular",class:"text-gray-700 cursor-pointer font-medium"}," Auto-refresh every 10 seconds ",-1))]))],2)]),c.value?(i(),l("div",_t,[...e[15]||(e[15]=[t("p",{class:"font-bold text-lg"},"ðŸ‘¨â€ðŸ³ KITCHEN MODE",-1)])])):d("",!0),A.value?(i(),l("div",wt,[t("div",kt,[e[16]||(e[16]=t("span",{class:"text-2xl",title:"Notification"},"ðŸ””",-1)),t("div",null,[t("p",Ct,o(A.value.title),1),t("p",At,o(A.value.message),1)]),t("button",{onClick:e[8]||(e[8]=s=>A.value=null),class:"ml-4 px-2 py-1 text-white hover:text-gray-200 hover:bg-white hover:bg-opacity-20 rounded transition-colors",title:"Close notification","aria-label":"Close notification"}," âœ• Close ")])])):d("",!0),t("div",{class:q(c.value?"w-full px-2 py-4":"container mx-auto px-4 py-6 max-w-7xl")},[f.value&&v.value.length===0?(i(),l("div",$t,[...e[17]||(e[17]=[t("div",{class:"text-4xl mb-4"},"â³",-1),t("p",{class:"text-gray-600"},"Loading orders...",-1)])])):F.value?(i(),l("div",It,[e[18]||(e[18]=t("div",{class:"text-4xl mb-4"},"âš ï¸",-1)),e[19]||(e[19]=t("h3",{class:"text-lg font-bold text-red-900 mb-2"},"Failed to Load Orders",-1)),t("p",Tt,o(F.value),1),t("button",{onClick:$,class:"btn btn-primary"},"Try Again")])):N.value.length===0?(i(),l("div",Mt,[e[20]||(e[20]=t("div",{class:"text-6xl mb-4"},"ðŸ“‹",-1)),e[21]||(e[21]=t("h3",{class:"text-xl font-bold text-gray-900 mb-2"},"No Orders Found",-1)),t("p",Nt,o(_.value||h.value?"Try adjusting your filters.":"No orders yet."),1)])):d("",!0),c.value&&N.value.length>0?(i(),l("div",St,[t("div",Ot,[t("div",Pt,[t("div",jt,[e[22]||(e[22]=t("div",{class:"flex flex-col"},[t("h3",{class:"text-white font-bold text-lg"},"ðŸ“‹ Pending"),t("p",{class:"text-xs text-yellow-100"},"New orders")],-1)),t("span",Dt,o(p("pending").length),1)]),t("div",Ft,[(i(!0),l(x,null,b(p("pending"),s=>(i(),l("div",{key:s.orderId,class:"kanban-card bg-white rounded-lg shadow-md p-5 border-l-4 border-yellow-500 hover:shadow-lg transition-shadow"},[t("div",Rt,[t("div",Lt,[t("h3",qt,"Table "+o(s.tableNumber||"N/A"),1),t("span",Vt,"#"+o(s.orderId.slice(-6)),1)]),t("div",Et,[t("span",null,"â° "+o(I(s.createdAt)),1),e[23]||(e[23]=t("span",null,"â€¢",-1)),t("span",null,o(S(s)),1)])]),t("div",Ut,[(i(!0),l(x,null,b(s.items,(n,r)=>(i(),l("div",{key:r,class:"flex items-center justify-between text-base py-1 border-b border-gray-100 last:border-0"},[t("span",zt,o(n.quantity)+"x "+o(n.name||n.menu_item_id),1),t("span",Kt," $"+o(((n.price||n.price_cents/100)*(n.quantity||1)).toFixed(2)),1)]))),128))]),t("div",Ht,[t("div",Bt,[e[24]||(e[24]=t("span",{class:"text-lg font-semibold text-gray-700"},"Total:",-1)),t("span",Wt,"$"+o(s.totalAmount.toFixed(2)),1)])]),t("button",{onClick:n=>y(s.orderId,"preparing"),disabled:m.value===s.orderId,class:"w-full px-4 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 text-base font-bold shadow-md transition-all flex items-center justify-center gap-2",title:"Move order to Preparing status"},[...e[25]||(e[25]=[t("span",null,"â†’",-1),t("span",null,"Move to Preparing",-1)])],8,Gt)]))),128)),p("pending").length===0?(i(),l("div",Jt,[...e[26]||(e[26]=[t("p",{class:"text-gray-400 text-sm"},"No pending orders",-1)])])):d("",!0)])]),t("div",Qt,[t("div",Yt,[e[27]||(e[27]=t("div",{class:"flex flex-col"},[t("h3",{class:"text-white font-bold text-lg"},"ðŸ‘¨â€ðŸ³ Preparing"),t("p",{class:"text-xs text-blue-100"},"In kitchen")],-1)),t("span",Xt,o(p("preparing").length),1)]),t("div",Zt,[(i(!0),l(x,null,b(p("preparing"),s=>(i(),l("div",{key:s.orderId,class:"kanban-card bg-white rounded-lg shadow-md p-4 border-l-4 border-blue-500 hover:shadow-lg transition-shadow"},[t("div",te,[t("div",ee,[t("h3",se,"Table "+o(s.tableNumber||"N/A"),1),t("div",ne,[t("button",{onClick:V(n=>L(s),["stop"]),class:"px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 text-gray-700 rounded transition-colors",title:"Print kitchen docket"}," ðŸ–¨ï¸ Print ",8,oe),t("span",ae,"#"+o(s.orderId.slice(-6)),1)])]),t("div",le,[t("span",null,"â° "+o(I(s.createdAt)),1),e[28]||(e[28]=t("span",null,"â€¢",-1)),t("span",null,o(S(s)),1)])]),w.value||R.value.has(s.orderId)?(i(),l("div",ie,[(i(!0),l(x,null,b(s.items,(n,r)=>(i(),l("div",{key:r,class:"flex items-center justify-between text-sm py-0.5 border-b border-gray-100 last:border-0"},[t("span",re,o(n.quantity)+"x "+o(n.name||n.menu_item_id),1),t("span",de," $"+o(((n.price||n.price_cents/100)*(n.quantity||1)).toFixed(2)),1)]))),128))])):(i(),l("div",ce,[t("div",ue,[(i(!0),l(x,null,b(s.items.slice(0,2),(n,r)=>(i(),l("div",{key:r,class:"py-0.5"},o(n.quantity)+"x "+o(n.name||n.menu_item_id),1))),128)),s.items.length>2?(i(),l("p",pe," +"+o(s.items.length-2)+" more items ",1)):d("",!0)]),t("button",{onClick:n=>R.value.add(s.orderId),class:"mt-2 text-xs text-blue-600 hover:text-blue-800 font-medium"}," View all "+o(s.items.length)+" items â†’ ",9,ge)])),t("div",xe,[t("div",be,[e[29]||(e[29]=t("span",{class:"text-base font-semibold text-gray-700"},"Total:",-1)),t("span",me,"$"+o(s.totalAmount.toFixed(2)),1)])]),t("div",ve,[t("button",{onClick:n=>y(s.orderId,"ready"),disabled:m.value===s.orderId,class:"w-full px-4 py-2.5 bg-green-500 text-white rounded-lg hover:bg-green-600 disabled:opacity-50 text-sm font-bold shadow-md transition-all flex items-center justify-center gap-2",title:"Mark order as ready for pickup"},[...e[30]||(e[30]=[t("span",null,"âœ“",-1),t("span",null,"Mark Ready for Pickup",-1)])],8,ye),t("button",{onClick:n=>y(s.orderId,"cancelled"),disabled:m.value===s.orderId,class:"w-full px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 disabled:opacity-50 text-xs font-medium",title:"Cancel this order"}," âœ• Cancel Order ",8,fe)])]))),128)),p("preparing").length===0?(i(),l("div",he,[...e[31]||(e[31]=[t("p",{class:"text-gray-400 text-sm"},"No orders preparing",-1)])])):d("",!0)])]),t("div",_e,[t("div",we,[e[32]||(e[32]=t("div",{class:"flex flex-col"},[t("h3",{class:"text-white font-bold text-lg"},"âœ… Ready"),t("p",{class:"text-xs text-green-100"},"Ready for pickup")],-1)),t("span",ke,o(p("ready").length),1)]),t("div",Ce,[(i(!0),l(x,null,b(p("ready"),s=>(i(),l("div",{key:s.orderId,class:"kanban-card bg-white rounded-lg shadow-lg p-4 border-l-4 border-green-500 hover:shadow-xl transition-shadow ring-2 ring-green-200"},[t("div",Ae,[t("div",$e,[t("h3",Ie,"Table "+o(s.tableNumber||"N/A"),1),t("div",Te,[t("button",{onClick:V(n=>L(s),["stop"]),class:"px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 text-gray-700 rounded transition-colors",title:"Print kitchen docket"}," ðŸ–¨ï¸ Print ",8,Me),t("span",Ne,"#"+o(s.orderId.slice(-6)),1)])]),t("div",Se,[t("p",Oe,[e[33]||(e[33]=t("span",null,"âš ï¸",-1)),t("span",null,"Ready for pickup â€¢ "+o(S(s)),1)])]),t("div",Pe,[t("span",null,"â° "+o(I(s.createdAt)),1)])]),w.value||R.value.has(s.orderId)?(i(),l("div",je,[(i(!0),l(x,null,b(s.items,(n,r)=>(i(),l("div",{key:r,class:"flex items-center justify-between text-sm py-0.5 border-b border-gray-100 last:border-0"},[t("span",De,o(n.quantity)+"x "+o(n.name||n.menu_item_id),1),t("span",Fe," $"+o(((n.price||n.price_cents/100)*(n.quantity||1)).toFixed(2)),1)]))),128))])):(i(),l("div",Re,[t("div",Le,[(i(!0),l(x,null,b(s.items.slice(0,2),(n,r)=>(i(),l("div",{key:r,class:"py-0.5"},o(n.quantity)+"x "+o(n.name||n.menu_item_id),1))),128)),s.items.length>2?(i(),l("p",qe," +"+o(s.items.length-2)+" more items ",1)):d("",!0)]),t("button",{onClick:n=>R.value.add(s.orderId),class:"mt-2 text-xs text-blue-600 hover:text-blue-800 font-medium"}," View all "+o(s.items.length)+" items â†’ ",9,Ve)])),t("div",Ee,[t("div",Ue,[e[34]||(e[34]=t("span",{class:"text-base font-semibold text-gray-700"},"Total:",-1)),t("span",ze,"$"+o(s.totalAmount.toFixed(2)),1)])]),t("button",{onClick:n=>y(s.orderId,"served"),disabled:m.value===s.orderId,class:"w-full px-4 py-3 bg-purple-500 text-white rounded-lg hover:bg-purple-600 disabled:opacity-50 text-base font-bold shadow-md transition-all flex items-center justify-center gap-2",title:"Mark order as served to customer"},[...e[35]||(e[35]=[t("span",null,"âœ“",-1),t("span",null,"Mark as Served",-1)])],8,Ke)]))),128)),p("ready").length===0?(i(),l("div",He,[...e[36]||(e[36]=[t("p",{class:"text-gray-400 text-sm"},"No orders ready",-1)])])):d("",!0)])]),t("div",Be,[t("div",We,[e[37]||(e[37]=t("div",{class:"flex flex-col"},[t("h3",{class:"text-white font-bold text-lg"},"âœ“ Served"),t("p",{class:"text-xs text-purple-100"},"Completed")],-1)),t("span",Ge,o(p("served").length),1)]),t("div",Je,[(i(!0),l(x,null,b(p("served"),s=>{var n;return i(),l("div",{key:s.orderId,class:"kanban-card bg-white rounded-lg shadow p-4 border-l-4 border-purple-500 opacity-70"},[t("div",Qe,[t("div",Ye,[t("h3",Xe,"Table "+o(s.tableNumber||"N/A"),1),t("button",{onClick:V(r=>L(s),["stop"]),class:"px-2 py-0.5 text-xs bg-gray-100 hover:bg-gray-200 text-gray-700 rounded transition-colors",title:"Print kitchen docket"}," ðŸ–¨ï¸ ",8,Ze)]),t("p",ts,"#"+o(s.orderId.slice(-6)),1)]),t("div",es,[t("p",ss,o((n=s.items)==null?void 0:n.length)+" items",1),t("p",ns,"$"+o(s.totalAmount.toFixed(2)),1)]),t("p",os,o(I(s.createdAt)),1)])}),128)),p("served").length===0?(i(),l("div",as,[...e[38]||(e[38]=[t("p",{class:"text-gray-400 text-sm"},"No served orders",-1)])])):d("",!0)])])])])):!c.value&&N.value.length>0?(i(),l("div",ls,[(i(!0),l(x,null,b(N.value,s=>(i(),l("div",{key:s.orderId,class:q(["card hover:shadow-lg transition-shadow",G(s.status)])},[t("div",is,[t("div",null,[t("h3",rs," Table "+o(s.tableNumber||"N/A"),1),t("p",ds,"Order #"+o(s.orderId.slice(-6)),1)]),t("div",cs,[t("button",{onClick:V(n=>L(s),["stop"]),class:"px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 text-gray-700 rounded transition-colors",title:"Print kitchen docket"}," ðŸ–¨ï¸ Print ",8,us),t("span",{class:q(["px-3 py-1 rounded-full text-xs font-semibold",W(s.status)])},o(E(s.status)),3)])]),t("div",ps,[(i(!0),l(x,null,b(s.items,(n,r)=>(i(),l("div",{key:r,class:"flex items-center justify-between text-sm"},[t("span",gs,o(n.quantity)+"x "+o(n.name||n.menu_item_id),1),t("span",xs," $"+o(((n.price||n.price_cents/100)*(n.quantity||1)).toFixed(2)),1)]))),128))]),t("div",bs,[t("div",ms,[e[39]||(e[39]=t("span",{class:"text-gray-600"},"Received:",-1)),t("span",vs,o(I(s.createdAt)),1)]),s.updatedAt!==s.createdAt?(i(),l("div",ys,[e[40]||(e[40]=t("span",{class:"text-gray-600"},"Last Updated:",-1)),t("span",fs,o(I(s.updatedAt)),1)])):d("",!0),t("div",hs,[e[41]||(e[41]=t("span",{class:"text-gray-600"},"Processing Time:",-1)),t("span",_s,o(S(s)),1)])]),t("div",ws,[e[42]||(e[42]=t("span",{class:"font-bold text-gray-900"},"Total:",-1)),t("span",ks," $"+o(s.totalAmount.toFixed(2)),1)]),t("div",Cs,[s.status==="pending"?(i(),l("button",{key:0,onClick:n=>y(s.orderId,"preparing"),disabled:m.value===s.orderId,class:"flex-1 px-3 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 text-sm font-medium flex items-center justify-center gap-1",title:"Move order to Preparing status"},[...e[43]||(e[43]=[t("span",null,"â†’",-1),t("span",null,"Move to Preparing",-1)])],8,As)):d("",!0),s.status==="preparing"?(i(),l("button",{key:1,onClick:n=>y(s.orderId,"ready"),disabled:m.value===s.orderId,class:"flex-1 px-3 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 disabled:opacity-50 text-sm font-medium flex items-center justify-center gap-1",title:"Mark order as ready for pickup"},[...e[44]||(e[44]=[t("span",null,"âœ“",-1),t("span",null,"Mark Ready",-1)])],8,$s)):d("",!0),s.status==="ready"?(i(),l("button",{key:2,onClick:n=>y(s.orderId,"served"),disabled:m.value===s.orderId,class:"flex-1 px-3 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 disabled:opacity-50 text-sm font-medium flex items-center justify-center gap-1",title:"Mark order as served to customer"},[...e[45]||(e[45]=[t("span",null,"âœ“",-1),t("span",null,"Mark Served",-1)])],8,Is)):d("",!0),["pending","preparing"].includes(s.status)?(i(),l("button",{key:3,onClick:n=>y(s.orderId,"cancelled"),disabled:m.value===s.orderId,class:"px-3 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 disabled:opacity-50 text-sm font-medium",title:"Cancel this order"}," âœ• Cancel ",8,Ts)):d("",!0)])],2))),128))])):d("",!0)],2)]))}},js=X(Ms,[["__scopeId","data-v-fd283fea"]]);export{js as default};
