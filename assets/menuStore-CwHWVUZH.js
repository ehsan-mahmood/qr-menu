import{s as p,r as s,k as m}from"./index-Bx3ZWrDG.js";import{q as I}from"./qrService-DCGUVNOJ.js";import{m as f}from"./menuService-hd0KrZcd.js";const q=p("qr",()=>{const l=s(""),r=s(null),u=s(""),o=s(""),c=s(""),v=s(!1),d=s(null),b=m(()=>r.value!==null);async function h(e){v.value=!0,d.value=null;try{const a=await I.getQRData(e);return r.value=a.data,l.value=e,u.value=a.data.tableNumber||"",o.value=a.data.menuId||"",c.value=a.data.merchantId||"",a.data}catch(a){throw d.value=a.message||"Failed to load QR data",a}finally{v.value=!1}}function y(e){l.value=e}function g(e){u.value=e}function M(e){r.value=e,e.qrToken&&(l.value=e.qrToken),e.tableNumber&&(u.value=e.tableNumber),e.menuId&&(o.value=e.menuId),e.merchantId&&(c.value=e.merchantId)}function E(){l.value="",r.value=null,u.value="",o.value="",c.value="",d.value=null}return{qrToken:l,qrData:r,tableNumber:u,menuId:o,merchantId:c,loading:v,error:d,hasQRData:b,fetchQRData:h,setQRToken:y,setTableNumber:g,setQRData:M,clearQRData:E}}),N=p("menu",()=>{const l=s(null),r=s(!1),u=s(null),o=s(!0),c=m(()=>{var e;return((e=l.value)==null?void 0:e.sections)||[]}),v=m(()=>{var e;return((e=l.value)==null?void 0:e.merchantName)||""}),d=m(()=>{var e;return(e=l.value)!=null&&e.sections?l.value.sections.flatMap(a=>a.items):[]});async function b(e){var a;r.value=!0,u.value=null;try{const n=await f.getMenuByToken(e),t=((a=n.data)==null?void 0:a.data)||n.data;return l.value=t,(t==null?void 0:t.orderEnabled)!==void 0&&(o.value=t.orderEnabled),t}catch(n){throw u.value=n.message||"Failed to load menu",n}finally{r.value=!1}}async function h(e){var a;r.value=!0,u.value=null;try{const n=await f.getMenuById(e),t=((a=n.data)==null?void 0:a.data)||n.data;return l.value=t,(t==null?void 0:t.orderEnabled)!==void 0&&(o.value=t.orderEnabled),t}catch(n){throw u.value=n.message||"Failed to load menu",n}finally{r.value=!1}}async function y(e,a){var n;r.value=!0,u.value=null;try{const t=await f.getMenuBySlug(e,a),i=((n=t.data)==null?void 0:n.data)||t.data;return l.value=i,(i==null?void 0:i.orderEnabled)!==void 0&&(o.value=i.orderEnabled),i}catch(t){throw u.value=t.message||"Failed to load menu",t}finally{r.value=!1}}async function g(e){var a;try{const n=await f.getMenuConfig(e);return((a=n.data)==null?void 0:a.orderEnabled)!==void 0&&(o.value=n.data.orderEnabled),n.data}catch(n){return console.error("Failed to fetch menu config:",n),{orderEnabled:!0}}}function M(e){l.value=e,(e==null?void 0:e.orderEnabled)!==void 0&&(o.value=e.orderEnabled)}function E(){l.value=null,u.value=null,o.value=!0}return{currentMenu:l,loading:r,error:u,orderEnabled:o,sections:c,merchantName:v,allItems:d,fetchMenuByToken:b,fetchMenuById:h,fetchMenuBySlug:y,fetchMenuConfig:g,setMenu:M,clearMenu:E}});export{N as a,q as u};
