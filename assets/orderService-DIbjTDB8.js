import{T as u,H as c,J as n,B as m}from"./index-BBUPlI-g.js";import{a as i}from"./demoStorage-Cgo6iTtd.js";const w={async createOrder(e){if(u){await new Promise(a=>setTimeout(a,600));const s=new Date,t={orderId:`order-${Date.now()}`,tableNumber:e.tableNumber||e.customerName||"N/A",items:e.items||[],totalAmount:e.totalAmount||0,status:"pending",createdAt:s.toISOString(),updatedAt:s.toISOString(),statusHistory:[{status:"pending",timestamp:s.toISOString()}]};return c?i.add(t):(n.unshift(t),n.length>50&&n.splice(50)),{data:{messageId:"ORDER_CREATED",receivingId:t.orderId,order:t}}}return await m.post("/orders",e)},async updateOrderStatus(e,r){if(u){if(await new Promise(t=>setTimeout(t,400)),c){const t=i.getById(e);if(t){const a={...t,status:r,updatedAt:new Date().toISOString(),statusHistory:[...t.statusHistory||[],{status:r,timestamp:new Date().toISOString()}]};return i.update(e,a),{data:{messageId:"ORDER_UPDATED",receivingId:e,status:r}}}}else{const t=n.find(a=>a.orderId===e);t&&(t.status=r,t.updatedAt=new Date().toISOString(),t.statusHistory||(t.statusHistory=[]),t.statusHistory.push({status:r,timestamp:t.updatedAt}))}return{data:{messageId:"ORDER_UPDATED",receivingId:e,status:r}}}return await m.patch(`/orders/${e}`,{status:r})},async getOrderById(e){return u?(await new Promise(s=>setTimeout(s,300)),c?{data:i.getById(e)||null}:{data:n.find(s=>s.orderId===e)||n[0]}):await m.get(`/orders/${e}`)},async getRecentOrders(e,r=10){return u?(await new Promise(t=>setTimeout(t,300)),c?{data:i.getRecent(r)}:{data:[...n].sort((a,o)=>new Date(o.createdAt)-new Date(a.createdAt)).slice(0,r)}):await m.get(`/orders/recent/${e}`,{params:{limit:r}})},async getAllOrders(e={}){if(u){await new Promise(d=>setTimeout(d,400));let o=c?[...i.getAll()]:[...n];return e.status&&(o=o.filter(d=>d.status===e.status)),e.tableNumber&&(o=o.filter(d=>d.tableNumber&&d.tableNumber.toLowerCase().includes(e.tableNumber.toLowerCase()))),{data:o}}const r=new URLSearchParams;e.merchantId&&r.append("merchantId",e.merchantId),e.status&&r.append("status",e.status),e.date&&r.append("date",e.date);const s=r.toString(),t=`/orders${s?"?"+s:""}`;return await m.get(t)}};export{w as o};
