import{s as H,r as T,U as Q,k as y,_ as U,x as J,y as K,c as o,e as i,d as e,q as b,t as l,w as j,z as W,j as t,o as X,a as Y,A as Z,g as P,F,m as k,b as ee,n as L}from"./index-BBUPlI-g.js";import{a as te,u as oe}from"./menuStore-CuK3jpnS.js";import{u as R}from"./basketStore-7Ma3zxfE.js";import{u as se}from"./analyticsStore-C7MR09P7.js";import"./qrService-kcVc_Zvo.js";import"./menuService-BO-AAJCC.js";import"./demoStorage-Cgo6iTtd.js";const q=H("theme",()=>{const c=T(Q),w=y(()=>c.value==="design-a"),g=y(()=>c.value==="design-b"),r=y(()=>c.value==="design-c"),E={name:"Design A - Paper Menu",colors:{background:"#FAF7F2",textPrimary:"#2F2A25",textSecondary:"#6E6259",primary:"#7A8F5B",accent:"#C47A5A",divider:"#E6E1DA"},layout:{menuStyle:"list",basketStyle:"footer",sectionStyle:"divider"}},f={name:"Design B - Modern Food App",colors:{background:"#FFFFFF",primary:"#FF6B57",secondary:"#3ECF8E",accent:"#FFD23F",textPrimary:"#1F1F1F",textSecondary:"#6F6F6F"},layout:{menuStyle:"cards",basketStyle:"fab",sectionStyle:"tabs"}},u={name:"Design C - Elegant Cafe Menu",colors:{background:"#FEFDF9",backgroundAlt:"#FAF8F3",textPrimary:"#3E2723",textSecondary:"#6E6159",primary:"#5D4037",accent:"#B8715C",accentGreen:"#7A8F5B",divider:"#E8E4DD",cardBackground:"#FFFFFF"},layout:{menuStyle:"cards",basketStyle:"bottom-bar",sectionStyle:"sticky-tabs"}},p=y(()=>w.value?E:g.value?f:(r.value,u));function A(C){c.value=C}return{currentTheme:c,theme:p,isDesignA:w,isDesignB:g,isDesignC:r,setTheme:A}}),le={key:0,class:"w-full h-64 sm:h-80"},ne=["src","alt"],ae={class:"p-6"},ie={class:"flex justify-between items-start gap-4 mb-4"},ce={key:1,class:"mb-6"},re={key:2,class:"mb-6"},de={__name:"ItemModal",props:{isOpen:{type:Boolean,required:!0},item:{type:Object,default:null}},emits:["close","add-to-basket"],setup(c,{emit:w}){const g=c,r=w,E=R(),f=q(),u=y(()=>f.isDesignC),p=()=>{r("close")},A=()=>{g.item&&(E.addItem(g.item),r("add-to-basket",g.item),p())};return(C,v)=>(t(),J(W,{name:"modal"},{default:K(()=>{var D,h,m,S,_,x,B,I;return[c.isOpen?(t(),o("div",{key:0,class:"fixed inset-0 z-50 flex items-end sm:items-center justify-center p-4",onClick:p},[v[1]||(v[1]=e("div",{class:"absolute inset-0 bg-black bg-opacity-50"},null,-1)),e("div",{class:"relative bg-white rounded-t-3xl sm:rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",style:b(u.value?"background-color: #FFFFFF;":""),onClick:v[0]||(v[0]=j(()=>{},["stop"]))},[e("button",{onClick:p,class:"absolute top-4 right-4 w-10 h-10 rounded-full flex items-center justify-center transition-colors z-10 hover:opacity-80",style:b(u.value?"background-color: #F5F5F5; color: #2F2A25;":"background-color: #F5F5F5;"),"aria-label":"Close"},[e("span",{class:"text-2xl",style:b(u.value?"color: #2F2A25;":"color: #666;")},"Ã—",4)],4),(D=c.item)!=null&&D.image?(t(),o("div",le,[e("img",{src:c.item.image,alt:c.item.name,class:"w-full h-full object-cover"},null,8,ne)])):i("",!0),e("div",ae,[e("div",ie,[e("h2",{class:"text-2xl font-bold",style:b(u.value?"color: #2F2A25; letter-spacing: -0.3px; font-weight: 700;":"")},l((h=c.item)==null?void 0:h.name),5),e("span",{class:"text-2xl font-semibold whitespace-nowrap",style:b(u.value?"color: #2F2A25; font-weight: 600;":"")}," $"+l((m=c.item)==null?void 0:m.price.toFixed(2)),5)]),(S=c.item)!=null&&S.description?(t(),o("p",{key:0,class:"mb-6 leading-relaxed font-normal",style:b(u.value?"color: #6E6159;":"color: #666;")},l(c.item.description),5)):i("",!0),(_=c.item)!=null&&_.category?(t(),o("div",ce,[e("span",{class:"inline-block px-3 py-1 rounded-full text-sm",style:b(u.value?"background-color: #FAF8F3; color: #6E6159;":"background-color: #F5F5F5; color: #666;")},l(c.item.category),5)])):i("",!0),(x=c.item)!=null&&x.available?i("",!0):(t(),o("div",re,[e("span",{class:"inline-block px-3 py-1 rounded-full text-sm font-medium",style:b(u.value?"background-color: #F5F5F5; color: #6E6159;":"background-color: #FEE2E2; color: #991B1B;")}," Currently Unavailable ",4)])),(B=c.item)!=null&&B.available?(t(),o("button",{key:3,onClick:A,class:"w-full py-4 text-lg font-semibold rounded-lg text-white transition-all hover:opacity-90 active:scale-98",style:b(u.value?"background-color: #2F2A25; font-weight: 600;":"")}," Add to Order - $"+l((I=c.item)==null?void 0:I.price.toFixed(2)),5)):i("",!0)])],4)])):i("",!0)]}),_:1}))}},ue=U(de,[["__scopeId","data-v-9bb81802"]]),me={key:0,class:"min-h-screen",style:{"background-color":"#FEFDF9","font-family":"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif"}},ye={class:"sticky top-0 z-10",style:{"background-color":"#FEFDF9","border-bottom":"1px solid #E8E4DD"}},pe={class:"container mx-auto px-4 py-5"},ve={class:"text-center"},xe={class:"text-2xl font-bold",style:{color:"#2F2A25","letter-spacing":"-0.3px","font-weight":"700"}},be={key:0,class:"text-sm mt-1.5 font-normal",style:{color:"#6E6159"}},he={key:0,class:"sticky top-[73px] z-10",style:{"background-color":"#FEFDF9","border-bottom":"1px solid #E8E4DD","backdrop-filter":"blur(8px)"}},_e={class:"container mx-auto px-4 py-3"},ge={class:"flex gap-2.5 overflow-x-auto scrollbar-hide"},fe=["onClick"],Fe={key:1,class:"container mx-auto px-4 py-12 text-center"},ke={key:2,class:"container mx-auto px-4 py-12 text-center"},we={class:"mb-4",style:{color:"#B8715C"}},Ee={key:3,class:"container mx-auto px-4 py-6 pb-32"},Ae={key:0,class:"text-center py-12"},Ce=["id"],De={class:"text-3xl font-bold mb-6 pt-2 uppercase tracking-tight",style:{color:"#8B4513","font-weight":"700","letter-spacing":"0.5px"}},Se={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},Be=["onClick"],Ie={class:"relative h-48 bg-gradient-to-br",style:{background:"linear-gradient(135deg, #FAF8F3 0%, #E8E4DD 100%)"}},Me=["src","alt"],$e={key:1,class:"flex items-center justify-center h-full text-5xl opacity-30"},Te=["onClick"],je={class:"p-4"},Ne={class:"font-bold text-base mb-1.5",style:{color:"#2F2A25","font-weight":"700"}},ze={key:0,class:"text-sm mt-1.5 line-clamp-2 leading-relaxed font-normal",style:{color:"#6E6159"}},Oe={class:"flex items-center justify-between mt-3 pt-3",style:{"border-top":"1px solid #E8E4DD"}},Pe={class:"font-semibold text-lg",style:{color:"#2F2A25","font-weight":"600"}},Ve={key:0,class:"text-xs px-2 py-1 rounded-full font-medium",style:{"background-color":"#F5F5F5",color:"#6E6159"}},Le={key:4,class:"fixed bottom-0 left-0 right-0 shadow-lg z-20 border-t",style:{"background-color":"#FFFFFF","border-color":"#E8E4DD"}},Ue={class:"container mx-auto px-4 py-4"},Re={class:"flex justify-between items-center"},qe={class:"text-sm font-medium",style:{color:"#6E6159"}},Ge={class:"font-bold text-lg mt-0.5",style:{color:"#2F2A25","font-weight":"700"}},He={key:1,class:"min-h-screen bg-cream pb-24"},Qe={class:"bg-white border-b border-gray-100 sticky top-0 z-10"},Je={class:"container mx-auto px-4 py-4"},Ke={class:"text-center"},We={class:"text-2xl font-bold",style:{color:"#1F1F1F","font-family":"'Poppins', sans-serif"}},Xe={key:0,class:"text-sm mt-1",style:{color:"#6F6F6F"}},Ye={key:0,class:"bg-white sticky top-16 z-10 border-b border-gray-100"},Ze={class:"container mx-auto px-4 py-3"},et={class:"flex gap-2 overflow-x-auto scrollbar-hide"},tt=["onClick"],ot={key:1,class:"container mx-auto px-4 py-8 text-center"},st={key:2,class:"container mx-auto px-4 py-8 text-center"},lt={class:"text-red-600 mb-4"},nt={key:3,class:"container mx-auto px-4 py-6"},at={key:0,class:"text-center py-12"},it=["id"],ct={class:"text-xl font-bold mb-4",style:{color:"#1F1F1F","font-family":"'Poppins', sans-serif"}},rt={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},dt=["onClick"],ut={class:"relative h-48 bg-gradient-to-br from-gray-100 to-gray-200"},mt=["src","alt"],yt={key:1,class:"flex items-center justify-center h-full text-4xl"},pt=["onClick"],vt={class:"p-4"},xt={class:"font-semibold text-lg",style:{color:"#1F1F1F"}},bt={key:0,class:"text-sm mt-1 line-clamp-2",style:{color:"#6F6F6F"}},ht={class:"font-bold mt-2",style:{color:"#FF6B57"}},_t={class:"text-xs"},gt={key:2,class:"min-h-screen",style:{"background-color":"#FAF7F2","font-family":"'Merriweather', Georgia, serif"}},ft={class:"border-b",style:{"background-color":"#FAF7F2","border-color":"#E6E1DA"}},Ft={class:"container mx-auto px-4 py-4"},kt={class:"text-center"},wt={class:"text-2xl font-bold",style:{color:"#2F2A25"}},Et={key:0,class:"text-sm mt-1",style:{color:"#6E6259"}},At={key:0,class:"container mx-auto px-4 py-8 text-center"},Ct={key:1,class:"container mx-auto px-4 py-8 text-center"},Dt={class:"text-red-600 mb-4"},St={key:2,class:"container mx-auto px-4 py-6 max-w-3xl pb-32"},Bt={key:0,class:"text-center py-12"},It={class:"border-t-2 py-3",style:{"border-color":"#E6E1DA"}},Mt={class:"text-xl font-bold text-center",style:{color:"#2F2A25"}},$t={class:"space-y-4 mt-4"},Tt=["onClick"],jt={class:"flex justify-between items-start gap-4"},Nt={class:"flex-1"},zt={class:"font-semibold",style:{color:"#2F2A25"}},Ot={key:0,class:"text-sm italic mt-1",style:{color:"#6E6259"}},Pt={class:"flex items-center gap-3"},Vt={class:"font-medium whitespace-nowrap",style:{color:"#2F2A25"}},Lt=["onClick"],Ut={key:3,class:"fixed bottom-0 left-0 right-0 border-t shadow-lg",style:{"background-color":"#FAF7F2","border-color":"#E6E1DA"}},Rt={class:"container mx-auto px-4 py-4 max-w-3xl"},qt={class:"flex justify-between items-center"},Gt={class:"text-sm",style:{color:"#6E6259"}},Ht={class:"font-bold",style:{color:"#2F2A25"}},Qt={__name:"MenuDisplay",setup(c){const w=Y(),g=ee(),r=te(),E=R(),f=oe(),u=q(),p=se(),A=T(!1),C=T(null),v=T(null),D=y(()=>r.loading),h=y(()=>r.error),m=y(()=>r.sections),S=y(()=>r.merchantName),_=y(()=>f.tableNumber),x=y(()=>E.itemCount),B=y(()=>E.totalAmount);X(async()=>{const{merchantSlug:d,menuName:n,menuId:a}=w.params;try{if(d&&n){await r.fetchMenuBySlug(d,n);const s=r.currentMenu;s!=null&&s.menuId&&(await r.fetchMenuConfig(s.menuId),p.postEvent({eventType:"menu_view",menuId:s.menuId,timestamp:new Date().toISOString()}))}else a?(await r.fetchMenuById(a),await r.fetchMenuConfig(a),p.postEvent({eventType:"menu_view",menuId:a,timestamp:new Date().toISOString()})):f.menuId&&(await r.fetchMenuById(f.menuId),await r.fetchMenuConfig(f.menuId));m.value.length>0&&(v.value=m.value[0].id)}catch(s){console.error("Failed to load menu:",s)}});const I=d=>{v.value=d;const n=document.getElementById(`section-${d}`);n&&n.scrollIntoView({behavior:"smooth",block:"start"})},N=d=>{var n;C.value=d,A.value=!0,p.postEvent({eventType:"item_click",menuId:(n=r.currentMenu)==null?void 0:n.menuId,itemId:d.id,timestamp:new Date().toISOString()})},V=()=>{A.value=!1,C.value=null},$=d=>{var n;E.addItem(d),p.postEvent({eventType:"item_added",menuId:(n=r.currentMenu)==null?void 0:n.menuId,itemId:d.id,timestamp:new Date().toISOString()})},G=d=>{$(d),V()},z=()=>{g.push("/basket")},O=async()=>{const d=w.params.menuId;d&&await r.fetchMenuById(d)};return(d,n)=>(t(),o("div",null,[P(u).isDesignC?(t(),o("div",me,[e("div",ye,[e("div",pe,[e("div",ve,[e("h1",xe,l(S.value),1),_.value?(t(),o("p",be,"Table "+l(_.value),1)):i("",!0)])])]),m.value.length>0?(t(),o("div",he,[e("div",_e,[e("div",ge,[(t(!0),o(F,null,k(m.value,a=>(t(),o("button",{key:a.id,onClick:s=>I(a.id),class:L(["px-5 py-2.5 rounded-lg whitespace-nowrap font-semibold text-sm transition-all duration-200",v.value===a.id?"text-white":"hover:opacity-80"]),style:b(v.value===a.id?"background-color: #2F2A25;":"background-color: #F5F5F5; color: #2F2A25;")},l(a.name),15,fe))),128))])])])):i("",!0),D.value?(t(),o("div",Fe,[...n[0]||(n[0]=[e("div",{class:"text-4xl mb-3"},"â³",-1),e("p",{style:{color:"#6E6159"}},"Loading menu...",-1)])])):h.value?(t(),o("div",ke,[n[1]||(n[1]=e("div",{class:"text-4xl mb-4"},"âš ï¸",-1)),e("p",we,l(h.value),1),e("button",{onClick:O,class:"px-6 py-2.5 rounded-lg text-white font-semibold transition-all hover:opacity-90",style:{"background-color":"#2F2A25"}}," Try Again ")])):(t(),o("div",Ee,[m.value.length===0?(t(),o("div",Ae,[...n[2]||(n[2]=[e("p",{style:{color:"#6E6159"}},"No menu items available",-1)])])):i("",!0),(t(!0),o(F,null,k(m.value,a=>(t(),o("div",{key:a.id,id:`section-${a.id}`,class:"mb-10",style:{"scroll-margin-top":"130px"}},[e("h2",De,l(a.name),1),e("div",Se,[(t(!0),o(F,null,k(a.items,s=>(t(),o("div",{key:s.id,class:"bg-white rounded-xl overflow-hidden shadow-sm hover:shadow-md transition-all duration-200 cursor-pointer border border-transparent hover:border-opacity-20",style:{"border-color":"#E8E4DD"},onClick:M=>N(s)},[e("div",Ie,[s.image?(t(),o("img",{key:0,src:s.image,alt:s.name,class:"w-full h-full object-cover"},null,8,Me)):(t(),o("div",$e," ðŸ½ï¸ ")),s.available?(t(),o("button",{key:2,onClick:j(M=>$(s),["stop"]),class:"absolute bottom-3 right-3 w-11 h-11 rounded-full flex items-center justify-center text-white font-bold text-xl transition-all active:scale-95 hover:opacity-90",style:{"background-color":"#2F2A25","box-shadow":"0 4px 12px rgba(0, 0, 0, 0.4), 0 0 0 2px rgba(255, 255, 255, 0.6)","backdrop-filter":"blur(4px)"},"aria-label":"Add to order"}," + ",8,Te)):i("",!0)]),e("div",je,[e("h3",Ne,l(s.name),1),s.description?(t(),o("p",ze,l(s.description),1)):i("",!0),e("div",Oe,[e("span",Pe,"$"+l(s.price.toFixed(2)),1),s.available?i("",!0):(t(),o("span",Ve," Unavailable "))])])],8,Be))),128))])],8,Ce))),128))])),x.value>0?(t(),o("div",Le,[e("div",Ue,[e("div",Re,[e("div",null,[e("p",qe,l(x.value)+" "+l(x.value===1?"item":"items"),1),e("p",Ge,"$"+l(B.value.toFixed(2)),1)]),e("button",{onClick:z,class:"px-6 py-3 rounded-lg font-semibold text-white transition-all hover:opacity-90 active:scale-95",style:{"background-color":"#2F2A25","font-weight":"600"}}," View Order â†’ ")])])])):i("",!0)])):P(u).isDesignB?(t(),o("div",He,[e("div",Qe,[e("div",Je,[e("div",Ke,[e("h1",We,l(S.value),1),_.value?(t(),o("p",Xe,"Table "+l(_.value),1)):i("",!0)])])]),m.value.length>0?(t(),o("div",Ye,[e("div",Ze,[e("div",et,[(t(!0),o(F,null,k(m.value,a=>(t(),o("button",{key:a.id,onClick:s=>I(a.id),class:L(["px-4 py-2 rounded-full whitespace-nowrap font-medium transition-all",v.value===a.id?"bg-coral text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"])},l(a.name),11,tt))),128))])])])):i("",!0),D.value?(t(),o("div",ot,[...n[3]||(n[3]=[e("div",{class:"text-4xl mb-4"},"â³",-1),e("p",{class:"text-gray-500"},"Loading menu...",-1)])])):h.value?(t(),o("div",st,[n[4]||(n[4]=e("div",{class:"text-4xl mb-4"},"âš ï¸",-1)),e("p",lt,l(h.value),1),e("button",{onClick:O,class:"px-6 py-2 rounded-lg text-white",style:{"background-color":"#FF6B57"}}," Try Again ")])):(t(),o("div",nt,[m.value.length===0?(t(),o("div",at,[...n[5]||(n[5]=[e("p",{class:"text-gray-500 text-lg"},"No menu items available",-1)])])):i("",!0),(t(!0),o(F,null,k(m.value,a=>(t(),o("div",{key:a.id,id:`section-${a.id}`,class:"mb-8"},[e("h2",ct,l(a.name),1),e("div",rt,[(t(!0),o(F,null,k(a.items,s=>(t(),o("div",{key:s.id,class:"bg-white rounded-2xl overflow-hidden shadow-md hover:shadow-xl transition-shadow cursor-pointer",onClick:M=>N(s)},[e("div",ut,[s.image?(t(),o("img",{key:0,src:s.image,alt:s.name,class:"w-full h-full object-cover"},null,8,mt)):(t(),o("div",yt," ðŸ½ï¸ ")),s.available?(t(),o("button",{key:2,onClick:j(M=>$(s),["stop"]),class:"absolute bottom-3 right-3 w-12 h-12 rounded-full shadow-lg flex items-center justify-center text-white font-bold text-xl transition-transform active:scale-95",style:{"background-color":"#FF6B57"}}," + ",8,pt)):i("",!0)]),e("div",vt,[e("h3",xt,l(s.name),1),s.description?(t(),o("p",bt,l(s.description),1)):i("",!0),e("p",ht,"$"+l(s.price.toFixed(2)),1)])],8,dt))),128))])],8,it))),128))])),x.value>0?(t(),o("button",{key:4,onClick:z,class:"fixed bottom-6 right-6 w-16 h-16 rounded-full shadow-2xl flex flex-col items-center justify-center text-white font-bold transition-transform active:scale-95 z-20",style:{"background-color":"#FF6B57"}},[n[6]||(n[6]=e("span",{class:"text-2xl"},"ðŸ›’",-1)),e("span",_t,l(x.value),1)])):i("",!0)])):P(u).isDesignA?(t(),o("div",gt,[e("div",ft,[e("div",Ft,[e("div",kt,[e("h1",wt,l(S.value),1),_.value?(t(),o("p",Et,"Table "+l(_.value),1)):i("",!0)])])]),D.value?(t(),o("div",At,[...n[7]||(n[7]=[e("div",{class:"text-4xl mb-4"},"â³",-1),e("p",{style:{color:"#6E6259"}},"Loading menu...",-1)])])):h.value?(t(),o("div",Ct,[n[8]||(n[8]=e("div",{class:"text-4xl mb-4"},"âš ï¸",-1)),e("p",Dt,l(h.value),1),e("button",{onClick:O,class:"px-6 py-2 rounded underline",style:{color:"#7A8F5B"}}," Try Again ")])):(t(),o("div",St,[m.value.length===0?(t(),o("div",Bt,[...n[9]||(n[9]=[e("p",{style:{color:"#6E6259"}},"No menu items available",-1)])])):i("",!0),(t(!0),o(F,null,k(m.value,a=>(t(),o("div",{key:a.id,class:"mb-8"},[e("div",It,[e("h2",Mt,l(a.name),1)]),e("div",$t,[(t(!0),o(F,null,k(a.items,s=>(t(),o("div",{key:s.id,class:"py-3 border-b cursor-pointer hover:opacity-80 transition-opacity",style:{"border-color":"#E6E1DA"},onClick:M=>N(s)},[e("div",jt,[e("div",Nt,[e("h3",zt,l(s.name),1),s.description?(t(),o("p",Ot,l(s.description),1)):i("",!0)]),e("div",Pt,[e("span",Vt," $"+l(s.price.toFixed(2)),1),s.available?(t(),o("button",{key:0,onClick:j(M=>$(s),["stop"]),class:"text-sm underline",style:{color:"#7A8F5B"}}," Add ",8,Lt)):i("",!0)])])],8,Tt))),128))])]))),128))])),x.value>0?(t(),o("div",Ut,[e("div",Rt,[e("div",qt,[e("div",null,[e("p",Gt,l(x.value)+" items",1),e("p",Ht,"$"+l(B.value.toFixed(2)),1)]),e("button",{onClick:z,class:"px-6 py-2 rounded underline font-medium",style:{color:"#7A8F5B"}}," View Order â†’ ")])])])):i("",!0)])):i("",!0),Z(ue,{"is-open":A.value,item:C.value,onClose:V,onAddToBasket:G},null,8,["is-open","item"])]))}},to=U(Qt,[["__scopeId","data-v-52a53829"]]);export{to as default};
